"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,r,o){return r&&e(n.prototype,r),o&&e(n,o),n}}(),SimpleMasonry=function(){var e=[],n=[],r=function(r){var o,t=e.indexOf(r);return 0>t?(e.push(r),o={},n.push(o)):o=n[t],o},o=function(){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,e);var o,t={masonryBox:".masonry-box",masonryColumn:".masonry-column"},s=void 0,i=void 0,l=void 0;r(this).privates={},o=r(this).privates;for(var u in t)t.hasOwnProperty(u)&&n[u]&&(t[u]=n[u]);o.masonryBox=t.masonryBox,o.masonryColumn=t.masonryColumn,o.isNode=function(e){return e&&"string"==typeof e.innerHTML},o.columnBoxes=function(){return o.isNode(o.masonryBox)?[o.masonryBox]:Array.isArray(o.masonryBox)?o.masonryBox:"string"==typeof o.masonryBox?document.querySelectorAll(o.masonryBox):[]}(),o.iBoxes=o.columnBoxes.length-1,o.countAvailableColumns=function(e){var n=e.simpleMesonry.columns,r=n.length-1,o=0;if(r>-1){var t=n[n.length-1].offsetTop;for(r;r>=0;r-=1)n[r].offsetTop===t&&(o+=1);return o}return 0},o.orderItems=function(e){var n,r,t,s,i,l=o.countAvailableColumns(e);for(e.simpleMesonry.fill=l,t=e.simpleMesonry.columns,s=t.length-1,i=s-l,n=e.simpleMesonry.items,r=n.length-1;r>=0;r-=1)i>=s&&(s=t.length-1),t[s].appendChild(n[r]),s-=1;o.doEvent("order",n)},l=function(e){var n=e.childNodes,r=n.length-1,t=[];for(r;r>=0;r-=1)o.isNode(n[r])&&t.push(n[r]);return t.reverse()},i=function(e){var n,r=e.simpleMesonry&&e.simpleMesonry.columns,o=r.length-1,t=[],s=function(e){var n=[],r=e.length,o=0,t=function s(t,i){r>o&&(t===r&&(o=t=0,i+=1),e[t][i]?n.push(e[t][i]):o+=1,s(t+1,i))};return t(0,0),n.reverse()};for(o;o>=0;o-=1)n=l(r[o]),t.push(n);e.simpleMesonry.items=s(t)},s=function(e){var n=e.querySelectorAll(o.masonryColumn),r=n.length-1;for(r;r>=0;r-=1)n[r].parentNode===e&&(n[r].style.minHeight="1px",e.simpleMesonry.columns.push(n[r]))},o.eventStore={},o.doEvent=function(e,n){if(o.eventStore[e]){var r=o.eventStore[e].length-1;for(r;r>=0;r-=1)o.eventStore[e][r](n)}},o.init=function(e){e.simpleMesonry={columns:[],items:null,fill:0},s(e),i(e),o.orderItems(e)},window.addEventListener("resize",function(){var e=o.columnBoxes.length-1;for(e;e>=0;e-=1){var n=o.columnBoxes[e],r=o.countAvailableColumns(n);r!==n.simpleMesonry.fill&&o.orderItems(n)}})}return _createClass(e,[{key:"init",value:function(){var e=r(this).privates,n=e.columnBoxes,o=e.iBoxes;for(o;o>=0;o-=1)e.init(n[o]);return this}},{key:"append",value:function(e){var n=r(this).privates,o=n.columnBoxes[0],t=0;if(n.isNode(e))o.simpleMesonry.items.unshift(e),n.doEvent("append",e),n.orderItems(o);else if(Array.isArray(e)){for(t=e.length-1,e.reverse(),t;t>=0;t-=1)n.isNode(e[t])&&(o.simpleMesonry.items.unshift(e[t]),n.doEvent("append",e[t]));n.orderItems(o)}return this}},{key:"prepend",value:function(e){var n=r(this).privates,o=n.columnBoxes[0],t=0;if(n.isNode(e))o.simpleMesonry.items.push(e),n.doEvent("prepend",e),n.orderItems(o);else if(Array.isArray(e)){for(t=e.length-1,e.reverse(),t;t>=0;t-=1)n.isNode(e[t])&&(o.simpleMesonry.items.push(e[t]),n.doEvent("prepend",e[t]));n.orderItems(o)}return this}},{key:"get",value:function(e){var n=r(this).privates,o=n.columnBoxes[0],t=void 0,s=void 0,i=void 0,l=void 0,u=void 0;if("number"!=typeof e)return o.simpleMesonry.items;if(t=n.countAvailableColumns(o)-1,e>t)return[];for(s=o.simpleMesonry.columns[o.simpleMesonry.columns.length-1-e],i=[],l=o.simpleMesonry.items,u=l.length-1;u>=0;u-=1)l[u].parentNode===s&&i.push(l[u]);return i.reverse()}},{key:"each",value:function(e,n){var r=void 0,o=void 0;if("function"==typeof e)for(r=this.get(n),o=r.length-1;o>=0;o-=1)e(r[o],r.length-1-o);return this}},{key:"on",value:function(e,n){var o=r(this).privates;return o.eventStore[e]||(o.eventStore[e]=[]),"function"==typeof n&&o.eventStore[e].push(n),this}}]),e}();return o}();
