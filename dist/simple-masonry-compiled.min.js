"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,r,o){return r&&e(n.prototype,r),o&&e(n,o),n}}(),SimpleMasonry=function(){var e=[],n=[],r=function(r){var o,s=e.indexOf(r);return 0>s?(e.push(r),o={},n.push(o)):o=n[s],o},o=function(){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,e);var o,s=this,t={masonryBox:".masonry-box",masonryColumn:".masonry-column"},i=void 0,l=void 0,u=void 0;r(s).privates={},o=r(s).privates;for(var a in t)t.hasOwnProperty(a)&&n[a]&&(t[a]=n[a]);o.masonryBox=t.masonryBox,o.masonryColumn=t.masonryColumn,o.isNode=function(e){return e&&"string"==typeof e.innerHTML},o.reverseCopy=function(e){var n=[],r=e.length-1;for(r;r>=0;r-=1)n.push(e[r]);return n},o.splice=function(e){var n=o.columnBoxes[0],r=n.simpleMesonry.items.indexOf(e);r>=0&&n.simpleMesonry.items.splice(r,1)},o.columnBoxes=function(){return o.isNode(o.masonryBox)?[o.masonryBox]:Array.isArray(o.masonryBox)?o.masonryBox:"string"==typeof o.masonryBox?document.querySelectorAll(o.masonryBox):[]}(),o.iBoxes=o.columnBoxes.length-1,o.countAvailableColumns=function(e){var n=e.simpleMesonry.columns,r=n.length-1,o=0;if(r>-1){var s=n[n.length-1].offsetTop;for(r;r>=0;r-=1)n[r].offsetTop===s&&(o+=1);return o}return 0},o.orderItems=function(e){var n,r,s,t,i,l=o.countAvailableColumns(e);for(e.simpleMesonry.fill=l,s=e.simpleMesonry.columns,t=s.length-1,i=t-l,n=e.simpleMesonry.items,r=n.length-1;r>=0;r-=1)i>=t&&(t=s.length-1),s[t].appendChild(n[r]),t-=1;o.doEvent("order",n)},u=function(e){var n=e.childNodes,r=n.length-1,s=[];for(r;r>=0;r-=1)o.isNode(n[r])&&s.push(n[r]);return s.reverse()},l=function(e){var n,r=e.simpleMesonry&&e.simpleMesonry.columns,o=r.length-1,s=[],t=function(e){var n=[],r=e.length,o=0,s=function t(s,i){r>o&&(s===r&&(o=s=0,i+=1),e[s][i]?n.push(e[s][i]):o+=1,t(s+1,i))};return s(0,0),n.reverse()};for(o;o>=0;o-=1)n=u(r[o]),s.push(n);e.simpleMesonry.items=t(s)},i=function(e){var n=e.querySelectorAll(o.masonryColumn),r=n.length-1;for(r;r>=0;r-=1)n[r].parentNode===e&&(n[r].style.minHeight="1px",n[r].style.minWidth="1px",n[r].style["float"]="left",e.simpleMesonry.columns.push(n[r]))},o.eventStore={},o.doEvent=function(e,n){if(o.eventStore[e]){var r=o.eventStore[e].length-1;for(r;r>=0;r-=1)o.eventStore[e][r](n)}},o.init=function(e){e.simpleMesonry={columns:[],items:null,fill:0},i(e),l(e),o.orderItems(e)},window.addEventListener("resize",function(){var e=o.columnBoxes.length-1;for(e;e>=0;e-=1){var n=o.columnBoxes[e],r=o.countAvailableColumns(n);r!==n.simpleMesonry.fill&&o.orderItems(n)}})}return _createClass(e,[{key:"init",value:function(){var e=r(this).privates,n=e.columnBoxes,o=e.iBoxes;for(o;o>=0;o-=1)e.init(n[o]);return this}},{key:"append",value:function(e){var n=r(this).privates,o=n.columnBoxes[0],s=0;if(n.isNode(e))n.splice(e),o.simpleMesonry.items.unshift(e),n.orderItems(o),n.doEvent("append",e);else if(Array.isArray(e)){for(s=e.length-1,e.reverse(),s;s>=0;s-=1)n.isNode(e[s])&&(n.splice(e[s]),o.simpleMesonry.items.unshift(e[s]),n.doEvent("append",e[s]));n.orderItems(o)}return this}},{key:"prepend",value:function(e){var n=r(this).privates,o=n.columnBoxes[0],s=0;if(n.isNode(e))n.splice(e),o.simpleMesonry.items.push(e),n.doEvent("prepend",e),n.orderItems(o);else if(Array.isArray(e)){for(s=e.length-1,e.reverse(),s;s>=0;s-=1)n.isNode(e[s])&&(n.splice(e[s]),o.simpleMesonry.items.push(e[s]),n.doEvent("prepend",e[s]));n.orderItems(o)}return this}},{key:"get",value:function(e){var n=r(this).privates,o=n.columnBoxes[0],s=void 0,t=void 0,i=void 0,l=void 0,u=void 0;if("number"!=typeof e)return n.reverseCopy(o.simpleMesonry.items);if(s=n.countAvailableColumns(o)-1,e>s)return[];for(t=o.simpleMesonry.columns[o.simpleMesonry.columns.length-1-e],i=[],l=o.simpleMesonry.items,u=l.length-1;u>=0;u-=1)l[u].parentNode===t&&i.push(l[u]);return n.reverseCopy(i)}},{key:"each",value:function(e,n){var r=void 0,o=void 0;if("function"==typeof e)for(r=this.get(n),o=r.length-1;o>=0;o-=1)e(r[o],r.length-1-o);return this}},{key:"on",value:function(e,n){var o=r(this).privates;return o.eventStore[e]||(o.eventStore[e]=[]),"function"==typeof n&&o.eventStore[e].push(n),this}},{key:"columnsLength",value:function(){var e=r(this).privates,n=e.columnBoxes[0];return e.countAvailableColumns(n)}}]),e}();return o}();